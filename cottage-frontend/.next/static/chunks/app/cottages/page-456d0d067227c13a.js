(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{44330:(e,a,t)=>{Promise.resolve().then(t.bind(t,84481)),Promise.resolve().then(t.bind(t,71712))},76046:(e,a,t)=>{"use strict";var s=t(66658);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},84481:(e,a,t)=>{"use strict";t.d(a,{default:()=>o});var s=t(95155),r=t(12115),l=t(76046),n=t(4370);let i=["Jihočesk\xfd kraj","Jihomoravsk\xfd kraj","Karlovarsk\xfd kraj","Kr\xe1lov\xe9hradeck\xfd kraj","Libereck\xfd kraj","Moravskoslezsk\xfd kraj","Olomouck\xfd kraj","Pardubick\xfd kraj","Plzeňsk\xfd kraj","Praha","Středočesk\xfd kraj","\xdasteck\xfd kraj","Vysočina","Zl\xednsk\xfd kraj"],c=["Krkonošsko","Orlick\xe9 hory","Šumava","Jesen\xedky","Beskydy","Broumovsko","Česk\xfd r\xe1j","Krušn\xe9 hory","Žď\xe1rsk\xe9 vrchy","Moravsk\xfd kras"];function o(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)([]),[d,m]=(0,r.useState)({region:"",touristArea:"",priceRange:[0,1e4],maxPeopleCount:"",wifi:!1,parking_available:!1,animal_allowed:!1,bedding_available:!1}),[h,g]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[p,b]=(0,r.useState)(1),j=(0,l.useRouter)(),v=async()=>{try{let e=await fetch("http://jarda.site:5002/api/cottages");if(e.ok){let t=await e.json();console.log("Fetched cottages:",t),a(t),o(t);let s=await Promise.all(t.map(async e=>{let a=await fetch("http://jarda.site:5002/api/comments/".concat(e._id));if(a.ok){let t=await a.json(),s=t.reduce((e,a)=>e+a.rating,0)/(t.length||1);return{...e,averageRating:s||0}}return{...e,averageRating:0}}));a(s),o(s)}else alert("Chyba při nač\xedt\xe1n\xed chat.")}catch(e){console.error("Error fetching cottages:",e)}};(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{let a=[...e];d.region&&(a=a.filter(e=>e.region===d.region)),d.priceRange&&(a=a.filter(e=>e.rent_per_day>=d.priceRange[0]&&e.rent_per_day<=d.priceRange[1])),d.maxPeopleCount&&(a=a.filter(e=>e.maxPeopleCount>=parseInt(d.maxPeopleCount))),d.wifi&&(a=a.filter(e=>!0===e.wifi)),d.parking_available&&(a=a.filter(e=>!0===e.parking_available)),d.animal_allowed&&(a=a.filter(e=>!0===e.animal_allowed)),d.bedding_available&&(a=a.filter(e=>!0===e.bedding_available)),o(a)},[d]);let y=6*p,f=t.slice(y-6,y),k=e=>{b(e)},N=e=>{let a=e.target;a instanceof HTMLInputElement&&"checkbox"===a.type?m({...d,[a.name]:a.checked}):m({...d,[a.name]:a.value})},w=(e,a)=>{let t=[...d.priceRange];t[a]=Number(e.target.value),m({...d,priceRange:t})};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-center mb-6 text-gray-800",children:"Nab\xeddka Chat"}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("button",{onClick:()=>u(!x),className:"bg-mygreen text-white px-6 py-2 rounded-md shadow-md hover:bg-lightgreen transition",children:x?"Skr\xfdt filtry":"Zobrazit filtry"})}),x&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v()},className:"bg-white p-6 rounded-lg shadow-md mb-8 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kraj"}),(0,s.jsxs)("select",{name:"region",value:d.region,onChange:N,className:"w-full border rounded-md p-2",children:[(0,s.jsx)("option",{value:"",children:"-- Vyberte kraj --"}),i.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turistick\xe1 oblast"}),(0,s.jsxs)("select",{name:"touristArea",value:d.touristArea,onChange:N,className:"w-full border rounded-md p-2",children:[(0,s.jsx)("option",{value:"",children:"-- Vyberte turistickou oblast --"}),c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Počet osob"}),(0,s.jsx)("input",{type:"number",name:"maxPeopleCount",value:d.maxPeopleCount,onChange:N,placeholder:"Např. 8",className:"w-full border rounded-md p-2"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rozsah ceny"}),(0,s.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,s.jsx)("input",{type:"range",min:0,max:1e4,step:"100",value:d.priceRange[0],onChange:e=>w(e,0),className:"w-full accent-mygreen"}),(0,s.jsxs)("span",{className:"text-sm",children:[d.priceRange[0]," Kč"]}),(0,s.jsx)("input",{type:"range",min:0,max:1e4,step:"100",value:d.priceRange[1],onChange:e=>w(e,1),className:"w-full accent-mygreen"}),(0,s.jsxs)("span",{className:"text-sm",children:[d.priceRange[1]," Kč"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-6",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Wi-Fi"}),(0,s.jsx)("input",{type:"checkbox",name:"wifi",checked:d.wifi,onChange:N,className:"w-6 h-6 mt-2 accent-mygreen"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Parkov\xe1n\xed"}),(0,s.jsx)("input",{type:"checkbox",name:"parking_available",checked:d.parking_available,onChange:N,className:"w-6 h-6 mt-2 accent-mygreen"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Zv\xedřata povolena"}),(0,s.jsx)("input",{type:"checkbox",name:"animal_allowed",checked:d.animal_allowed,onChange:N,className:"w-6 h-6 mt-2 accent-mygreen"})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Povlečen\xed"}),(0,s.jsx)("input",{type:"checkbox",name:"bedding_available",checked:d.bedding_available,onChange:N,className:"w-6 h-6 mt-2 accent-mygreen"})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,s.jsx)("button",{type:"submit",className:"bg-lightgreen text-white px-4 py-2 rounded-md hover:bg-lightergreen",children:"Filtrovat"}),(0,s.jsx)("button",{type:"button",onClick:()=>{m({region:"",touristArea:"",priceRange:[0,1e4],maxPeopleCount:"",wifi:!1,parking_available:!1,animal_allowed:!1,bedding_available:!1}),window.location.reload(),b(1)},className:"bg-lightgreen text-white px-4 py-2 rounded-md hover:bg-lightergreen",children:"Vymazat filtry"})]})]}),(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Řadit podle:"}),(0,s.jsxs)("select",{value:h,onChange:e=>{let a=e.target.value;g(a);let s=[...t];"priceAsc"===a?s.sort((e,a)=>e.rent_per_day-a.rent_per_day):"priceDesc"===a?s.sort((e,a)=>a.rent_per_day-e.rent_per_day):"nameAsc"===a?s.sort((e,a)=>e.name.localeCompare(a.name)):"nameDesc"===a?s.sort((e,a)=>a.name.localeCompare(e.name)):"ratingDesc"===a&&s.sort((e,a)=>(a.averageRating||0)-(e.averageRating||0)),o(s)},className:"border rounded-md p-2 w-48 mt-2",children:[(0,s.jsx)("option",{value:"",children:"-- Vyberte možnost --"}),(0,s.jsx)("option",{value:"priceAsc",children:"Nejlevnějš\xed"}),(0,s.jsx)("option",{value:"priceDesc",children:"Nejdražš\xed"}),(0,s.jsx)("option",{value:"nameAsc",children:"Podle abecedy (A-Z)"}),(0,s.jsx)("option",{value:"nameDesc",children:"Podle abecedy (Z-A)"}),(0,s.jsx)("option",{value:"ratingDesc",children:"Nejl\xe9pe hodnocen\xe9"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition p-4",onClick:()=>j.push("/cottages/".concat(e._id)),children:[(0,s.jsx)("img",{src:e.image_urls[0]||"placeholder.jpg",alt:e.name,className:"w-full h-48 object-cover rounded-md"}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.name}),(0,s.jsx)("p",{className:"text-gray-500",children:e.region}),(0,s.jsxs)("p",{className:"text-mygreen font-bold",children:[e.rent_per_day," Kč / noc"]}),(0,s.jsxs)("p",{className:"text-lightgreen font-bold",children:[e.averageRating?e.averageRating.toFixed(1):"0.0"," / 10"]})]})]},e._id))}),(0,s.jsx)("div",{className:"mt-6 flex justify-center space-x-2",children:Array.from({length:Math.ceil(t.length/6)},(e,a)=>(0,s.jsx)("button",{onClick:()=>k(a+1),className:"px-4 py-2 rounded-md ".concat(p===a+1?"bg-lightgreen text-white":"bg-gray-200"),children:a+1},a))})]}),(0,s.jsx)(n.A,{})]})}},4370:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(95155),r=t(76046);function l(){let e=(0,r.useRouter)();return(0,s.jsx)("footer",{className:"bg-gradient-to-r from-darkgreen via-mygreen to-lightgreen text-white shadow-lg py-8",children:(0,s.jsxs)("div",{className:"container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-sm",children:[(0,s.jsxs)("div",{className:"text-center md:text-left space-y-2",children:[(0,s.jsx)("p",{className:"text-base font-bold",children:"Rezervačn\xed syst\xe9m Chat"}),(0,s.jsx)("p",{children:"\xa9 2024 Všechna pr\xe1va vyhrazena."}),(0,s.jsxs)("p",{children:["Vytvořil ",(0,s.jsx)("span",{className:"text-lightgreen font-semibold",children:"Ondřej"}),"."]})]}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-base font-bold",children:"Užitečn\xe9 odkazy"}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("button",{onClick:()=>{e.push("/contact")},className:"text-white hover:underline",children:"Kontakt"}),(0,s.jsx)("button",{onClick:()=>{e.push("/rules")},className:"text-white hover:underline",children:"Podm\xednky už\xedv\xe1n\xed"})]})]}),(0,s.jsxs)("div",{className:"text-center md:text-right space-y-2",children:[(0,s.jsx)("p",{className:"text-base font-bold",children:"Akce"}),(0,s.jsx)("a",{href:"/request",className:"text-white hover:underline",children:"Přidat chatu"})]})]})})}},71712:(e,a,t)=>{"use strict";t.d(a,{default:()=>n});var s=t(95155),r=t(12115),l=t(76046);function n(){let e=(0,l.useRouter)(),[a,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),h=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(e){t(!0);try{let a=JSON.parse(atob(e.split(".")[1]));o(a.email),console.log("Přihl\xe1šen\xfd uživatel:",a.email)}catch(e){console.error("Chyba při dek\xf3dov\xe1n\xed tokenu:",e)}}let a=e=>{h.current&&!h.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),(0,s.jsxs)("nav",{className:"bg-gradient-to-r from-lightgreen via-mygreen to-darkgreen text-white shadow-lg",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:(0,s.jsx)("a",{href:"/",children:"Chatky24"})}),(0,s.jsxs)("ul",{className:"flex space-x-4 items-center",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/",className:"hover:underline",children:"Domů"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/cottages",className:"hover:underline",children:"Chaty"})}),!a&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/login",className:"hover:underline",children:"Přihl\xe1šen\xed"})}),a&&c&&(0,s.jsxs)("li",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>m(!d),className:"hover:underline focus:outline-none",children:[c," "]}),d&&(0,s.jsx)("div",{ref:h,className:"absolute right-0 mt-2 bg-white text-gray-700 rounded-md shadow-lg w-48 z-10",children:(0,s.jsxs)("ul",{className:"py-2",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/profile",className:"block px-4 py-2 hover:bg-gray-100",onClick:()=>m(!1),children:"Můj profil"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/reservations",className:"block px-4 py-2 hover:bg-gray-100",onClick:()=>m(!1),children:"Moje rezervace"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),t(!1),i(!0),m(!1),setTimeout(()=>{i(!1),e.push("/login")},2e3)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",children:"Odhl\xe1sit se"})})]})})]})]})]}),n&&(0,s.jsx)("div",{className:"fixed top-0 left-0 w-full bg-red-500 text-white text-center py-2",children:"\xdaspěšně jste se odhl\xe1sili. Přesměrov\xe1v\xe1me na přihl\xe1šen\xed..."})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(44330)),_N_E=e.O()}]);