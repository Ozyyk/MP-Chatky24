(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{24789:(e,t,s)=>{Promise.resolve().then(s.bind(s,47654))},47654:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(95155),l=s(12115),n=s(76046),r=s(40842),i=s.n(r);s(35279);var o=s(71712);function c(){let{id:e}=(0,n.useParams)(),t=(0,n.useRouter)(),[s,r]=(0,l.useState)(null),[c,d]=(0,l.useState)([]),[m,h]=(0,l.useState)(null),[x,g]=(0,l.useState)(null),[u,p]=(0,l.useState)(0),[j,f]=(0,l.useState)([]),[b,v]=(0,l.useState)(null),[N,y]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(!e){alert("Chyba: ID chaty nebylo nalezeno.");return}let t=async()=>{try{let t=await fetch("http://jarda.site:5002/api/reservations/cottage/".concat(e));if(t.ok){let e=await t.json();d(e)}}catch(e){console.error("Chyba při nač\xedt\xe1n\xed rezervac\xed:",e)}},s=async()=>{try{let t=await fetch("http://jarda.site:5002/api/comments/".concat(e));if(t.ok){let e=await t.json();f(e)}}catch(e){console.error("Chyba při nač\xedt\xe1n\xed koment\xe1řů:",e)}};(async()=>{try{let t=await fetch("http://jarda.site:5002/api/cottages/".concat(e));if(t.ok){let e=await t.json();r(e)}}catch(e){console.error("Chyba při nač\xedt\xe1n\xed chaty:",e)}})(),t(),s()},[e]),(0,l.useEffect)(()=>{if(s){let e=()=>{let e={center:{lat:s.latitude,lng:s.longitude},zoom:13},t=document.getElementById("map");if(t){let a=new window.google.maps.Map(t,e);new window.google.maps.Marker({position:{lat:s.latitude,lng:s.longitude},map:a})}};if(window.google&&window.google.maps)e();else{let t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6fwX2QcuCC4F6Zvh8cZPVd02-xarf2zY",t.async=!0,t.onload=e,document.body.appendChild(t)}}},[s]);let w=e=>{y(e),v((null==s?void 0:s.image_urls[e])||null)},k=e=>c.some(t=>{let s=new Date(t.start_date).getTime(),a=new Date(t.end_date).getTime(),l=e.getTime();return l>=s&&l<=a}),C=async()=>{let s=localStorage.getItem("token");if(!s){alert("Mus\xedte b\xfdt přihl\xe1šeni."),t.push("/login");return}if(!m||!x){alert("Vyberte data pro rezervaci.");return}(await fetch("http://jarda.site:5002/api/reservations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({cottageID:e,start_date:m.toISOString(),end_date:x.toISOString(),total_price:u})})).ok?(alert("Rezervace byla vytvořena."),t.push("/reservations")):alert("Chyba při vytv\xe1řen\xed rezervace.")};return((0,l.useEffect)(()=>{m&&x&&s&&p(Math.ceil((x.getTime()-m.getTime())/864e5)*s.rent_per_day)},[m,x,s]),s)?(0,a.jsxs)("div",{children:[(0,a.jsx)(o.default,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[s.image_urls.length>0&&(0,a.jsx)("div",{className:"w-full h-96 bg-cover bg-center rounded-b-lg shadow-lg",style:{backgroundImage:"url(".concat(s.image_urls[0],")")}}),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6 bg-white shadow-lg rounded-lg mt-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-mygreen mb-6",children:s.name}),(0,a.jsx)("p",{className:"text-gray-700 text-lg mb-6",children:s.description}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold",children:["Region: ",(0,a.jsx)("span",{className:"font-normal",children:s.region})]}),(0,a.jsxs)("p",{className:"font-semibold",children:["Maxim\xe1ln\xed počet osob: ",(0,a.jsx)("span",{className:"font-normal",children:s.maxPeopleCount})]}),(0,a.jsxs)("p",{className:"font-semibold",children:["Počet pokojů: ",(0,a.jsx)("span",{className:"font-normal",children:s.roomCount})]}),(0,a.jsxs)("p",{className:"font-semibold",children:["Lůžkoviny: ",(0,a.jsx)("span",{className:"font-normal",children:s.bedding_available?"Ano":"Ne"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold",children:["Wi-Fi: ",(0,a.jsx)("span",{className:"font-normal",children:s.wifi?"Ano":"Ne"})]}),(0,a.jsxs)("p",{className:"font-semibold",children:["Zv\xedřata povolena: ",(0,a.jsx)("span",{className:"font-normal",children:s.animal_allowed?"Ano":"Ne"})]}),(0,a.jsxs)("p",{className:"font-semibold",children:["Parkov\xe1n\xed: ",(0,a.jsx)("span",{className:"font-normal",children:s.parking_available?"Ano":"Ne"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 text-2xl text-mygreen font-semibold",children:["Cena za noc: ",s.rent_per_day," Kč"]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Rezervace"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Poč\xe1tečn\xed datum"}),(0,a.jsx)(i(),{selected:m,onChange:e=>h(e),selectsStart:!0,startDate:m||void 0,endDate:x||void 0,filterDate:e=>!k(e),placeholderText:"Vyberte poč\xe1tečn\xed datum",className:"border rounded p-2 w-full"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Koncov\xe9 datum"}),(0,a.jsx)(i(),{selected:x,onChange:e=>g(e),selectsEnd:!0,startDate:m||void 0,endDate:x||void 0,minDate:m||void 0,filterDate:e=>!k(e),placeholderText:"Vyberte koncov\xe9 datum",className:"border rounded p-2 w-full"})]}),u>0&&(0,a.jsxs)("p",{className:"text-lg mt-4",children:["Celkov\xe1 cena: ",(0,a.jsxs)("span",{className:"text-mygreen font-bold",children:[u," Kč"]})]}),(0,a.jsx)("button",{onClick:C,className:"bg-mygreen text-white px-6 py-3 mt-6 rounded-md hover:bg-lightgreen transition",children:"Rezervovat"})]}),(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Dalš\xed obr\xe1zky"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:s.image_urls.slice(1).map((e,t)=>(0,a.jsx)("div",{style:{width:"200px",height:"200px",overflow:"hidden",borderRadius:"10px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",cursor:"pointer"},onClick:()=>w(t+1),children:(0,a.jsx)("img",{src:e,alt:"Dalš\xed obr\xe1zek ".concat(t+1),style:{width:"100%",height:"100%",objectFit:"cover"}})},t))})]}),b&&(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:[(0,a.jsx)("button",{onClick:()=>{v(null)},className:"absolute top-4 right-4 text-white text-2xl font-bold",children:"\xd7"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>{s&&N>0&&(y(N-1),v(s.image_urls[N-1]))},className:"text-white text-4xl font-bold px-4",disabled:0===N,children:"‹"}),(0,a.jsx)("img",{src:b,alt:"Detailn\xed obr\xe1zek",className:"max-w-full max-h-full rounded-lg"}),(0,a.jsx)("button",{onClick:()=>{s&&N<s.image_urls.length-1&&(y(N+1),v(s.image_urls[N+1]))},className:"text-white text-4xl font-bold px-4",disabled:N===s.image_urls.length-1,children:"›"})]})]}),(0,a.jsx)("div",{id:"map",className:"w-full h-96 rounded-lg mt-6 bg-gray-200"}),(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Koment\xe1ře"}),j.length>0?(0,a.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-lightergreen rounded-md shadow",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Hodnocen\xed:"})," ",e.rating,"/10"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Koment\xe1ř:"})," ",e.comment]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,a.jsx)("strong",{children:"Přid\xe1no:"})," ",new Date(e.created_at).toLocaleDateString()]})]},e._id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Zat\xedm nejsou ž\xe1dn\xe9 koment\xe1ře."})]})]})]})]}):(0,a.jsx)("p",{className:"text-center text-xl mt-10",children:"Nač\xedt\xe1n\xed..."})}},71712:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var a=s(95155),l=s(12115),n=s(76046);function r(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(!1),h=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(e){s(!0);try{let t=JSON.parse(atob(e.split(".")[1]));c(t.email),console.log("Přihl\xe1šen\xfd uživatel:",t.email)}catch(e){console.error("Chyba při dek\xf3dov\xe1n\xed tokenu:",e)}}let t=e=>{h.current&&!h.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),(0,a.jsxs)("nav",{className:"bg-gradient-to-r from-lightgreen via-mygreen to-darkgreen text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:(0,a.jsx)("a",{href:"/",children:"Chatky24"})}),(0,a.jsxs)("ul",{className:"flex space-x-4 items-center",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"hover:underline",children:"Domů"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/cottages",className:"hover:underline",children:"Chaty"})}),!t&&(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/login",className:"hover:underline",children:"Přihl\xe1šen\xed"})}),t&&o&&(0,a.jsxs)("li",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>m(!d),className:"hover:underline focus:outline-none",children:[o," "]}),d&&(0,a.jsx)("div",{ref:h,className:"absolute right-0 mt-2 bg-white text-gray-700 rounded-md shadow-lg w-48 z-10",children:(0,a.jsxs)("ul",{className:"py-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/profile",className:"block px-4 py-2 hover:bg-gray-100",onClick:()=>m(!1),children:"Můj profil"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/reservations",className:"block px-4 py-2 hover:bg-gray-100",onClick:()=>m(!1),children:"Moje rezervace"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),s(!1),i(!0),m(!1),setTimeout(()=>{i(!1),e.push("/login")},2e3)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",children:"Odhl\xe1sit se"})})]})})]})]})]}),r&&(0,a.jsx)("div",{className:"fixed top-0 left-0 w-full bg-red-500 text-white text-center py-2",children:"\xdaspěšně jste se odhl\xe1sili. Přesměrov\xe1v\xe1me na přihl\xe1šen\xed..."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,915,621,441,517,358],()=>t(24789)),_N_E=e.O()}]);