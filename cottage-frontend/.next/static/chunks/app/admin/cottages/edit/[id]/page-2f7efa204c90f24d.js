(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{87542:(e,a,r)=>{Promise.resolve().then(r.bind(r,45653))},76046:(e,a,r)=>{"use strict";var t=r(66658);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},45653:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>i});var t=r(95155),s=r(12115),l=r(76046),n=r(91286);let o=["Jihočesk\xfd kraj","Jihomoravsk\xfd kraj","Karlovarsk\xfd kraj","Kr\xe1lov\xe9hradeck\xfd kraj","Libereck\xfd kraj","Moravskoslezsk\xfd kraj","Olomouck\xfd kraj","Pardubick\xfd kraj","Plzeňsk\xfd kraj","Praha","Středočesk\xfd kraj","\xdasteck\xfd kraj","Vysočina","Zl\xednsk\xfd kraj"],d=["Krkonošsko","Orlick\xe9 hory","Šumava","Jesen\xedky","Beskydy","Broumovsko","Česk\xfd r\xe1j","Krušn\xe9 hory","Žď\xe1rsk\xe9 vrchy","Moravsk\xfd kras"];function i(){let[e,a]=(0,s.useState)(null),r=(0,l.useRouter)(),{id:i}=(0,l.useParams)();(0,s.useEffect)(()=>{let e=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let r=await fetch("http://jarda.site:5002/api/cottages/".concat(i),{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();a(e)}else alert("Chyba při nač\xedt\xe1n\xed chaty.")}catch(e){console.error("Chyba při nač\xedt\xe1n\xed:",e)}};(async()=>{let a=localStorage.getItem("token");if(!a){r.push("/");return}try{if(!JSON.parse(atob(a.split(".")[1])).isAdmin){r.push("/");return}}catch(e){console.error("Chyba při ověřov\xe1n\xed tokenu:",e),alert("Neplatn\xfd token. Přesměrov\xe1n\xed na \xfavodn\xed str\xe1nku."),r.push("/");return}e()})()},[i,r]);let u=async e=>{e.preventDefault();let a=localStorage.getItem("token");if(!a){alert("Nem\xe1te opr\xe1vněn\xed.");return}let t=new FormData(e.currentTarget),s={};t.forEach((e,a)=>{"image_urls"===a&&"string"==typeof e?s[a]=e.split(",").map(e=>e.trim()):s[a]=e});try{(await fetch("http://jarda.site:5002/api/cottages/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(s)})).ok?(alert("Chata \xfaspěšně upravena."),r.push("/admin")):alert("Chyba při \xfapravě chaty.")}catch(e){console.error("Chyba při \xfapravě:",e)}};return e?(0,t.jsxs)("div",{children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 py-12",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-mygreen text-center mb-8",children:"Upravit chatu"}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xe1zev chaty"}),(0,t.jsx)("input",{type:"text",name:"name",defaultValue:e.name,className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kraj"}),(0,t.jsxs)("select",{name:"region",defaultValue:e.region,className:"w-full border border-gray-300 rounded-md p-2",required:!0,children:[(0,t.jsx)("option",{value:"",children:"-- Vyberte kraj --"}),o.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Turistick\xe1 oblast"}),(0,t.jsxs)("select",{name:"touristArea",defaultValue:e.touristAreas,className:"w-full border border-gray-300 rounded-md p-2",required:!0,children:[(0,t.jsx)("option",{value:"",children:"-- Vyberte turistickou oblast --"}),d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cena za den"}),(0,t.jsx)("input",{type:"number",name:"rent_per_day",defaultValue:e.rent_per_day,className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Max. osob"}),(0,t.jsx)("input",{type:"number",name:"maxPeopleCount",defaultValue:e.maxPeopleCount,className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Počet pokojů"}),(0,t.jsx)("input",{type:"number",name:"roomCount",defaultValue:e.roomCount,className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Wifi"}),(0,t.jsxs)("select",{name:"wifi",defaultValue:e.wifi?"true":"false",className:"w-full border border-gray-300 rounded-md p-2",children:[(0,t.jsx)("option",{value:"true",children:"Ano"}),(0,t.jsx)("option",{value:"false",children:"Ne"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Zv\xedřata povolena"}),(0,t.jsxs)("select",{name:"animal_allowed",defaultValue:e.animal_allowed?"true":"false",className:"w-full border border-gray-300 rounded-md p-2",children:[(0,t.jsx)("option",{value:"true",children:"Ano"}),(0,t.jsx)("option",{value:"false",children:"Ne"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Povlečen\xed"}),(0,t.jsxs)("select",{name:"bedding_available",defaultValue:e.bedding_available?"true":"false",className:"w-full border border-gray-300 rounded-md p-2",children:[(0,t.jsx)("option",{value:"true",children:"Ano"}),(0,t.jsx)("option",{value:"false",children:"Ne"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Parkov\xe1n\xed"}),(0,t.jsxs)("select",{name:"parking_available",defaultValue:e.parking_available?"true":"false",className:"w-full border border-gray-300 rounded-md p-2",children:[(0,t.jsx)("option",{value:"true",children:"Ano"}),(0,t.jsx)("option",{value:"false",children:"Ne"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Zeměpisn\xe1 š\xedřka"}),(0,t.jsx)("input",{type:"number",name:"latitude",defaultValue:e.latitude,step:"any",className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Zeměpisn\xe1 d\xe9lka"}),(0,t.jsx)("input",{type:"number",name:"longitude",defaultValue:e.longitude,step:"any",className:"w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Obr\xe1zky (URL)"}),(0,t.jsx)("textarea",{name:"image_urls",defaultValue:e.image_urls.join(", "),className:"w-full border border-gray-300 rounded-md p-2",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Popis"}),(0,t.jsx)("textarea",{name:"description",defaultValue:e.description,className:"w-full border border-gray-300 rounded-md p-2",rows:4,required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"bg-mygreen text-white py-3 px-6 rounded-md hover:bg-lightgreen transition",children:"Uložit změny"})]})]})})]}):(0,t.jsx)("p",{children:"Nač\xedt\xe1n\xed..."})}},91286:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});var t=r(95155),s=r(12115),l=r(76046);function n(){let[e,a]=(0,s.useState)(""),r=(0,l.useRouter)();return(0,t.jsxs)("nav",{className:"relative bg-gradient-to-r from-lightgreen via-mygreen to-darkgreen text-white shadow-md",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"Admin Panel"}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),a("\xdaspěšně jste se odhl\xe1sili. Přesměrov\xe1v\xe1me na přihlašovac\xed str\xe1nku..."),setTimeout(()=>{r.push("/login")},2e3)},className:"bg-white text-mygreen font-medium py-2 px-4 rounded-md shadow-md hover:bg-gray-100 hover:text-green-700 transition",children:"Odhl\xe1sit se"})]}),e&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-full bg-red-500 text-white text-center py-2",children:e})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(87542)),_N_E=e.O()}]);